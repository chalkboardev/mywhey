{% comment %}
    
    OVERVIEW:
        This snippet is used to generate Success/Error messages after form 
        submissions to ensure the style / structure is consistent globally
    
    NOTES: 
        * Error messages are generated by Shopify.
        
        * Success Messages are not supplied from Shopify. 
          You will have to pass in your success message as a string, 
          alternatively, this will fall back to "Form posted successfully".
        
        * All styling for this section is handled in: v3-account-forms-scss

    PARAMETERS:        
        - Form        [Form Object]
        - Success     [String]
    
    
    EXAMPLE:
        {% render 'v3-form-response-messages', form: form, success: "Your form was posted successfully!" %}
    
    AUTHOR: jo@quickfiredigital.com
    
{% endcomment %}

{% if success == blank %}
    {% assign success = "Form posted successfully" %}
{% endif %}

{%- if form.posted_successfully? -%}
    <div class="form-success">
        <svg class="success-icon" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 13 13">
            <path d="M6.5 12.35C9.73087 12.35 12.35 9.73086 12.35 6.5C12.35 3.26913 9.73087 0.65 6.5 0.65C3.26913 0.65 0.65 3.26913 0.65 6.5C0.65 9.73086 3.26913 12.35 6.5 12.35Z" fill="#428445" stroke="white" stroke-width="0.7"/>
            <path d="M5.53271 8.66357L9.25213 4.68197" stroke="white"/>
            <path d="M4.10645 6.7688L6.13766 8.62553" stroke="white">
        </svg>

        <div class="success-message">
            {{ success }}
        </div>
    </div>
{% endif %}
{%- if form.errors -%}
    <div class='form-errors'>

        <svg class="icon error-icon" aria-hidden="true" focusable="false" role="presentation" viewBox="0 0 13 13">
            <circle cx="6.5" cy="6.50049" r="5.5" stroke="white"fill="currentColor" stroke-width="1"/>
            <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
        </svg>

    <div class="error-messages">
        <ul>
        {%- for field in form.errors -%}
            <li>
            {%- if field == 'form' -%}
                {{ form.errors.messages[field] }}
            {%- else -%}
                <a href="#ContactForm-{{ field }}">
                {{ form.errors.translated_fields[field] | capitalize }}
                {{ form.errors.messages[field] }}
                </a>
            {%- endif -%}
            </li>
        {%- endfor -%}
        </ul>
    </div>

    </div>
{%- endif -%}